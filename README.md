# npb-prediction

NPB（日本プロ野球）の選手成績予測プロジェクト。

## 概要

Marcel法をベースに、NPB選手の翌年成績を予測します。

### Marcel法とは
Tom Tangoが考案した成績予測手法。過去3年の成績を **5/4/3** で加重平均し、リーグ平均への回帰と年齢調整を行います。シンプルながら驚くほど強いベースラインとして知られています。

## 現在の機能

| スクリプト | 内容 |
|---|---|
| `fetch_npb_data.py` | baseball-data.com から NPB成績を取得（2015-2025、打者+投手） |
| `marcel_projection.py` | Marcel法による翌年成績予測 + バックテスト |

## 予測精度（2024年バックテスト）

| 指標 | MAE | RMSE | 対象 |
|---|---|---|---|
| 打率 (AVG) | .017 | .022 | 規定打席以上 (n=33) |
| OPS | .053 | .068 | 規定打席以上 (n=33) |
| 防御率 (ERA) | 0.64 | 0.81 | 100IP以上 (n=24) |
| WHIP | 0.13 | 0.14 | 100IP以上 (n=24) |

## 2025年予測 TOP5

### 打者（OPS）
| 選手 | チーム | OPS | HR | RBI |
|---|---|---|---|---|
| 村上宗隆 | ヤクルト | .899 | 34 | 91 |
| 近藤健介 | ソフトバンク | .899 | 17 | 65 |
| 吉田正尚 | オリックス | .854 | 15 | 69 |
| 岡本和真 | 巨人 | .848 | 29 | 81 |
| 牧秀悟 | DeNA | .825 | 23 | 81 |

### 投手（ERA）
| 選手 | チーム | ERA | WHIP | SO |
|---|---|---|---|---|
| 山本由伸 | オリックス | 1.93 | 1.00 | 169 |
| マルティネス | 中日 | 2.01 | 1.01 | 50 |
| モイネロ | ソフトバンク | 2.12 | 1.00 | 89 |
| 才木浩人 | 阪神 | 2.14 | 1.10 | 101 |
| 髙橋宏斗 | 中日 | 2.27 | 1.11 | 128 |

## 使い方

```bash
# データ取得（baseball-data.com から）
python fetch_npb_data.py

# Marcel法で予測
python marcel_projection.py
```

## 今後の予定

- [ ] 年齢調整カーブの追加
- [ ] ピタゴラス勝率（NPB最適指数 1.72）によるチーム勝率予測
- [ ] XGBoost / LightGBM で Marcel を上回るモデル
- [ ] FastAPI による推論API化

## データソース

**このプロジェクトのNPBデータは以下のサイトから取得しています：**

- [プロ野球データFreak](https://baseball-data.com) — NPB選手成績（2015-2025）

データの利用にあたり、提供元への敬意を忘れずに。

## License

MIT
